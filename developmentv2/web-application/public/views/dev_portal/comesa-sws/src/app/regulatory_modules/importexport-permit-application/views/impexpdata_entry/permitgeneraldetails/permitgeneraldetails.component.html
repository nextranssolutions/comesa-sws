<form role="form" enctype="multipart/form-data" role="form" [formGroup]="applicationGeneraldetailsfrm">
  <div class="row  wizard-content">


    <div class="input-group">
      <div class="col-lg-10">
        <label>{{'importer_exporter_details' | translate}}</label>
        <dx-text-box [readOnly]="true" formControlName="importer_exporter_name"
          [placeholder]="'importer_exporter_details' | translate" [showClearButton]="true">
        </dx-text-box>
        <input type="hidden" formControlName="importer_exporter_id" />
      </div>
      <div class="col-lg-2 pt-5">
        <dx-button [elementAttr]="{ class: 'btn btn-primary pull-left' }" [disabled]="ammendReadOnly"
          style="margin-top:25px !important;" text="{{ 'search_details' | translate }}" type="default"
          (onClick)="onsearchSenderreceiver()">
          <i class="fa fa-search"></i> {{ 'search' | translate }} {{ importerexporter_title }}
        </dx-button>
      </div>
    </div>


    <div class="col-lg-4">
      <label>{{'permit_type' | translate}}</label>
      <dx-select-box [dataSource]="permitTypeData" valueExpr="id" displayExpr="name"
        placeholder="{{'permit_type' | translate}}" [searchEnabled]="true" formControlName="permit_type_id">
      </dx-select-box>
    </div>


    <div class="col-lg-4">
      <label>{{ 'expected_date_of_shipment' | translate }}</label>
      <dx-date-box dateSerializationFormat="yyyy-MM-dd" [min]="today" formControlName="expected_date_of_shipment"
        [placeholder]="'expected_date_of_shipment' | translate" [showClearButton]="true">
      </dx-date-box>
    </div>

    <div class="col-lg-4">
      <label>{{'mode_of_transport' | translate}}</label>
      <dx-select-box [dataSource]="transportModeData" valueExpr="id" displayExpr="name"
        placeholder="{{'mode_of_transport' | translate}}" [searchEnabled]="true" formControlName="mode_of_transport_id">
      </dx-select-box>
    </div>



    <div class="col-lg-4">
      <label>{{ 'port_type' | translate}}</label>
      <dx-select-box [dataSource]="portTypeData" valueExpr="id" displayExpr="name"
        placeholder="{{'port_type' | translate}}" [searchEnabled]="true" formControlName="port_type_id">
      </dx-select-box>
    </div>

    <div class="col-lg-4">
      <label>{{ 'port_of_entryexit' | translate}}</label>
      <dx-select-box [dataSource]="portOfEntryExitData" valueExpr="id" displayExpr="name"
        placeholder="{{'port_of_entryexit' | translate}}" [searchEnabled]="true" formControlName="port_of_entryexit_id">
      </dx-select-box>
    </div>

    
    <div class="input-group col-md-4">
      <div class="col-lg-10">
        <label>{{'customs_office' | translate}}</label>
        <dx-text-box [readOnly]="true" formControlName="customs_office"
          [placeholder]="'customs_office' | translate" [showClearButton]="true">
        </dx-text-box>
        <input type="hidden" formControlName="customs_office_id" />
      </div>
      <div class="col-lg-2 pt-5">
        <dx-button [elementAttr]="{ class: 'btn btn-primary pull-left' }" [disabled]="ammendReadOnly"
          style="margin-top:25px !important;" text="{{ 'search_details' | translate }}" type="default"
          (onClick)="funcSearchCustomOffice()">
          <i class="fa fa-search"></i> {{ 'search' | translate }} {{ 'customs_office' |
          translate }}
        </dx-button>
      </div>

    </div>

    <div class="col-lg-4" *ngIf="is_licensepermit">
      <label>{{'mode_of_transport' | translate}}</label>
      <dx-select-box [dataSource]="modeOfTransportData" valueExpr="id" displayExpr="name"
        [placeholder]="'select_mode_of_transport' | translate" [searchEnabled]="true"
        formControlName="mode_oftransport_id">
      </dx-select-box>
    </div>

    <div class="col-lg-4">
      <label>{{ 'final_destination_country' | translate}}</label>
      <dx-select-box [dataSource]="countryData" valueExpr="id" displayExpr="name"
        placeholder="{{ 'final_destination_country' | translate}}" [readOnly]="ammendReadOnly" [searchEnabled]="true"
        formControlName="final_destination_country_id">
      </dx-select-box>
    </div>

    <div class="col-lg-4">
      <label>{{ 'invoice_type' | translate}}</label>
      <dx-select-box [dataSource]="invoiceTypeData" valueExpr="id" displayExpr="name"
        placeholder="{{ 'invoice_type' | translate}}" [readOnly]="ammendReadOnly" [searchEnabled]="true"
        formControlName="invoice_type_id">
      </dx-select-box>
    </div>

    <div class="col-lg-4">
      <label>{{'invoice_number'| translate}}</label>
      <dx-text-box formControlName="invoice_number" placeholder="{{'invoice_number' | translate}}"
        [showClearButton]="true">
      </dx-text-box>

    </div>

    <div class="col-lg-4">
      <label>{{ 'invoice_date' | translate }}</label>
      <dx-date-box dateSerializationFormat="yyyy-MM-dd" [min]="today" formControlName="invoice_date"
        [placeholder]="'invoice_date' | translate" [showClearButton]="true">
      </dx-date-box>
    </div>

    <div class="col-lg-4">
      <label>{{'total_invoice_value'| translate}}</label>
      <dx-text-box formControlName="total_invoice_value" placeholder="{{'total_invoice_value' | translate}}"
        [showClearButton]="true">
      </dx-text-box>

    </div>

    <div class="col-lg-4">
      <label>{{ 'currency_of_transaction' | translate}}</label>
      <dx-select-box [dataSource]="currencyData" valueExpr="id" displayExpr="name"
        placeholder="{{ 'currency_of_transaction' | translate}}" [readOnly]="ammendReadOnly" [searchEnabled]="true"
        formControlName="currency_oftransaction_id">
      </dx-select-box>
    </div>


    <div class="col-lg-4" *ngIf="is_licensepermit">
      <label>{{'invoice_paying_currency' | translate}}</label>
      <dx-select-box [dataSource]="currencyData" [readOnly]="ammendReadOnly" valueExpr="id" displayExpr="name"
        [placeholder]="'select_paying_currency' | translate" [searchEnabled]="true"
        formControlName="paying_currency_id">
      </dx-select-box>
    </div>



    <div class="col-lg-12">
      <label>{{'declaration_statuses' | translate}}</label>
      <dx-select-box [dataSource]="confirmDataParam" valueExpr="id" displayExpr="name"
        placeholder="{{'select' | translate}}" [searchEnabled]="true" [readOnly]="ammendReadOnly"
        formControlName="declaration_statuses_id">
      </dx-select-box>
    </div>


    <div class="col-lg-4 form-group" style="margin:1px;">

    </div>
    <div class="col-lg-12">
      <input type="hidden" value={{regulatory_function_id}} formControlName="regulatory_function_id" />


      <input type="hidden" value={{application_code}} formControlName="application_code" />
    </div>
  </div>
</form>
<!-- pop ups -->

<dx-popup class="popup" [width]="funcpopWidth(80)" [height]="550" [showTitle]="true" title="Registered Premises"
  [dragEnabled]="false" [hideOnOutsideClick]="false" [(visible)]="ispremisesSearchWinVisible">
  <div *dxTemplate="let data of 'content'">
    <dx-scroll-view>
      <dx-data-grid [dataSource]="registered_premisesData" [wordWrapEnabled]="true" [columnHidingEnabled]="false"
        [height]="500" (onToolbarPreparing)="onPremisesPerGridToolbar($event)"
        (onCellPrepared)="onCellRegisteredPremisesPrepared($event)" [remoteOperations]='true' [showBorders]="true">
        <dxo-filter-row [visible]="false"></dxo-filter-row>
        <dxo-search-panel [visible]="true">
        </dxo-search-panel>
        <dxi-column [width]="150" caption="{{'action' | translate}}" name="command-editing" [allowFiltering]="false"
          [allowSorting]="false" cellTemplate="cellTemplate">
          <div *dxTemplate="let data of 'cellTemplate'">

            <dx-button text="{{'select_premises_license' | translate }}" (click)="funcSelectPremiseDetails(data)"
              type="success" icon="edit" [elementAttr]="{ class: 'btn btn-primary' }">
            </dx-button>
          </div>
        </dxi-column>
        <dxi-column dataField="name" caption="{{ 'name' | translate }}"></dxi-column>

        <dxi-column dataField="premise_reg_no" caption="{{ 'premise_reg_no' | translate }}"></dxi-column>
        <dxi-column dataField="permit_no" caption="{{ 'permit_no' | translate }}"></dxi-column>
        <dxi-column dataField="physical_address" caption="{{ 'physical_address' | translate }}"></dxi-column>
        <dxi-column dataField="postal_address" caption="{{ 'postal_address' | translate }}"></dxi-column>
        <dxi-column dataField="region_name" caption="{{ 'region_name' | translate }}"></dxi-column>
        <dxi-column dataField="validity_status" caption="{{ 'validity_status' | translate }}"></dxi-column>

        <dxo-paging [enabled]="true">
        </dxo-paging>
        <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
        </dxo-pager>
        <dxo-export [enabled]="true" fileName="registeredPremises" [allowExportSelectedData]="true"></dxo-export>

      </dx-data-grid>
    </dx-scroll-view>
  </div>
</dx-popup>


<dx-popup class="popup" [width]="funcpopWidth(80)" [height]="550" [showTitle]="true"
  title="{{importerexporter_title}} Details" [dragEnabled]="false" [hideOnOutsideClick]="false"
  [(visible)]="issenderreceiverSearchWinVisible">
  <div *dxTemplate="let data of 'content'">
    <dx-scroll-view>
      <dx-data-grid class="table row-border hover" [allowColumnResizing]="true" [columnHidingEnabled]="false"
        [height]="500" (onToolbarPreparing)="onsenderreceivePreparing($event)" [wordWrapEnabled]="true"
        [remoteOperations]='true' [dataSource]="senderReceiverData" keyExpr="id">
        <dxo-filter-row [visible]="false"></dxo-filter-row>
        <dxo-search-panel [visible]="true">
        </dxo-search-panel>
        <dxo-paging [enabled]="true">
        </dxo-paging>
        <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
        </dxo-pager>
        <dxo-export [enabled]="true" fileName="manufacturingFile" [allowExportSelectedData]="true"></dxo-export>
        <dxo-selection mode="single"></dxo-selection>
        <dxo-group-panel [visible]="true"></dxo-group-panel>
        <dxi-column [width]="200" caption="{{'action' | translate}}" name="command-editing" [allowFiltering]="false"
          [allowSorting]="false" cellTemplate="cellTemplate">
          <div *dxTemplate="let data of 'cellTemplate'">
            <dx-button text="Select {{consignor_title}} Details" (click)="funcSelectReceiverSender(data)" type="success"
              icon="edit" [elementAttr]="{ class: 'btn btn-primary' }">
            </dx-button>
          </div>



        </dxi-column>
        <dxi-column dataField="name" caption="{{ 'name' | translate }}"></dxi-column>
        <dxi-column dataField="country" caption="{{ 'country' | translate }}"></dxi-column>
        <dxi-column dataField="region" caption="{{ 'region' | translate }}"></dxi-column>
        <dxi-column dataField="district" caption="{{ 'district' | translate }}"></dxi-column>
        <dxi-column dataField="physical_address" caption="{{ 'physical_address' | translate }}"></dxi-column>
        <dxi-column dataField="email" caption="{{ 'email' | translate }}"></dxi-column>


        <dxo-paging [pageSize]="50"></dxo-paging>
      </dx-data-grid>
    </dx-scroll-view>
  </div>
</dx-popup>

<dx-popup class="popup" [width]="funcpopWidth(80)" [height]="550" [showTitle]="true" title="{{consignee_sendertitle}}"
  [dragEnabled]="false" [hideOnOutsideClick]="false" [(visible)]="isconsigneeSearchWinVisible">
  <div *dxTemplate="let data of 'content'">
    <dx-scroll-view>
      <dx-data-grid class="table row-border hover" [allowColumnResizing]="true" [columnHidingEnabled]="false"
        [height]="500" (onToolbarPreparing)="onsenderreceivePreparing($event)" [wordWrapEnabled]="true"
        [remoteOperations]='true' [dataSource]="consigneeReceiverData" keyExpr="id">
        <dxo-filter-row [visible]="false"></dxo-filter-row>
        <dxo-search-panel [visible]="true">
        </dxo-search-panel>
        <dxo-paging [enabled]="true">
        </dxo-paging>
        <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
        </dxo-pager>
        <dxo-export [enabled]="true" fileName="manufacturingFile" [allowExportSelectedData]="true"></dxo-export>
        <dxo-selection mode="single"></dxo-selection>
        <dxo-group-panel [visible]="true"></dxo-group-panel>
        <dxi-column [width]="200" caption="{{'action' | translate}}" name="command-editing" [allowFiltering]="false"
          [allowSorting]="false" cellTemplate="cellTemplate">
          <div *dxTemplate="let data of 'cellTemplate'">

            <dx-button text="Select {{consignor_title}} Details" (click)="funcSelectReceiverSender(data)" type="success"
              icon="edit" [elementAttr]="{ class: 'btn btn-primary' }">
            </dx-button>
          </div>
        </dxi-column>
        <dxi-column dataField="name" caption="{{ 'name' | translate }}"></dxi-column>
        <dxi-column dataField="country" caption="{{ 'country' | translate }}"></dxi-column>
        <dxi-column dataField="region" caption="{{ 'region' | translate }}"></dxi-column>
        <dxi-column dataField="district" caption="{{ 'district' | translate }}"></dxi-column>
        <dxi-column dataField="physical_address" caption="{{ 'physical_address' | translate }}"></dxi-column>
        <dxi-column dataField="email" caption="{{ 'email' | translate }}"></dxi-column>

        <dxo-paging [pageSize]="50"></dxo-paging>
      </dx-data-grid>
    </dx-scroll-view>
  </div>
</dx-popup>

<dx-popup class="popup" [width]="funcpopWidth(80)" [height]="450" [showTitle]="true" title="{{importerexporter_title}}"
  [dragEnabled]="false" [hideOnOutsideClick]="false" [(visible)]="issenderreceiverAddWinVisible">
  <div *dxTemplate="let data of 'content'">
    <dx-scroll-view>
      <div class="col-lg-12">

        <form enctype="multipart/form-data" role="form" [formGroup]="permitReceiverSenderFrm"
          (ngSubmit)="onsavePermitReceiverSender()">

          <div class="row">

            <div class="col-xs-12 col-md-3 col-lg-3 col-xl-3 ">

              <label class="control-label">{{'name'| translate}}</label>
              <dx-text-box formControlName="name">
              </dx-text-box>

            </div>
            <div class="col-xs-12 col-md-3 col-lg-3 col-xl-3 ">
              <label class="control-label">{{'country'| translate}}</label>
              <dx-select-box [dataSource]="countryData" valueExpr="id" displayExpr="name"
                placeholder="{{'select_country' | translate}}" (onSelectionChanged)="onCoutryCboSelect($event)"
                [searchEnabled]="true" formControlName="country_id">
              </dx-select-box>
            </div>
            <div class="col-xs-12 col-md-3 col-lg-3 col-xl-3 ">
              <label for="ti" class="control-label">{{'province_region_city'| translate}}</label>

              <dx-select-box [dataSource]="regions" valueExpr="id" displayExpr="name"
                (onSelectionChanged)="onRegionsCboSelect($event)" [searchEnabled]="true" formControlName="region_id">
              </dx-select-box>

            </div>
            <div class="col-xs-12 col-md-3 col-lg-3 col-xl-3 ">
              <label for="ti" class="control-label">{{'district(optional)'| translate}}</label>

              <dx-select-box [dataSource]="districts" valueExpr="id" placeholder="{{'select_district' | translate}}"
                displayExpr="name" [searchEnabled]="true" formControlName="district_id">
              </dx-select-box>
            </div>
            <div class="col-xs-12 col-md-3 col-lg-3 col-xl-3 ">
              <label for="ti" class="control-label">{{'email_address'| translate}}</label>
              <dx-text-box formControlName="email_address" placeholder="{{'email_address' | translate}}">
              </dx-text-box>
            </div>

            <div class="col-xs-12 col-md-3 col-lg-3 col-xl-3 ">
              <label for="ti" class="control-label">{{'telephone_no'| translate}}</label>

              <dx-text-box formControlName="telephone_no" placeholder="{{'telephone_no' | translate}}">
              </dx-text-box>
            </div>

            <div class="col-lg-12">
              <label class="control-label">{{'physical_address'| translate}}</label>

              <dx-text-area [height]="60" formControlName="physical_address"
                placeholder="{{'physical_address' | translate}}">
              </dx-text-area>
            </div>

            <div class="col-lg-12 btn-margin-5">
              <br />
              <button type="submit" (submit)="onsavePermitReceiverSender()" class="btn btn-primary"><i
                  class="fa fa-user"></i> {{ 'save' | translate }} {{ importerexporter_title }}</button>
            </div>
          </div>
        </form>
      </div>
    </dx-scroll-view>
  </div>
</dx-popup>



<dx-popup class="popup" [width]="funcpopWidth(65)" [height]=620 [showTitle]="true" title="Add Manufacturer"
    [dragEnabled]="false" [hideOnOutsideClick]="false" [(visible)]="isnewcustomoffice">

    <div *dxTemplate="let data of 'content'" class="row">
        <dx-scroll-view>
            <div class="col-lg-12">
                <form enctype="multipart/form-data" role="form" [formGroup]="customOfficeFrm"
                    (ngSubmit)="onAddCustomDetails()">

                    <div class="row">

                        <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">

                            <label class="control-label">{{'name' | translate}}</label>
                            <dx-text-box formControlName="name">
                            </dx-text-box>

                        </div>
                        <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                            <label class="control-label">{{'country' | translate}}</label>

                            <dx-select-box [dataSource]="countries" valueExpr="id" displayExpr="name"
                                placeholder="{{'select_country_placeholder' | translate}}"
                                (onSelectionChanged)="onCoutryCboSelect($event)" [searchEnabled]="true"
                                formControlName="country_id">
                            </dx-select-box>
                        </div>
                        <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                            <label for="ti" class="control-label">{{'region/city(optional)' | translate}}</label>

                            <dx-select-box [dataSource]="regions" valueExpr="id" displayExpr="name"
                                [searchEnabled]="true" formControlName="region_id">
                            </dx-select-box>

                        </div>
                        <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                            <label for="ti" class="control-label">{{'email_address' | translate}}</label>
                            <dx-text-box formControlName="email_address" placeholder="{{'email_address' | translate}}">
                            </dx-text-box>
                        </div>
                        <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                            <label for="ti" class="control-label">{{'postal_address' | translate}}</label>
                            <dx-text-box formControlName="postal_address" placeholder="{{'postal_address' | translate}}">
                            </dx-text-box>
                        </div>
                        <div class="col-lg-12">
                            <label class="control-label">{{'physical_address' | translate}}</label>

                            <dx-text-area [height]="60" formControlName="physical_address"
                                placeholder="{{'physical_address' | translate}}">
                            </dx-text-area>
                        </div>
                        <div class="col-lg-12 btn-margin-5">
                            <br />
                            <button type="submit" (submit)="onAddCustomDetails()"
                                [disabled]="!customOfficeFrm.valid" class="btn btn-primary"><i class="fa fa-user"></i>
                                {{'save_manufacturer'}}</button>
                        </div>
                    </div>
                </form>
            </div>
        </dx-scroll-view>
    </div>
</dx-popup>

<dx-popup class="popup" [width]="funcpopWidth(80)" [height]="600" [showTitle]="true"
    title="{{'custom_office' | translate}}" [dragEnabled]="false" [hideOnOutsideClick]="false"
    [(visible)]="isCustomOfficePopupVisible">
    <div *dxTemplate="let data of 'content'">
        <dx-scroll-view>
            <dx-data-grid class="table row-border hover" [allowColumnResizing]="true" [wordWrapEnabled]="true"
                [columnHidingEnabled]="true" (onToolbarPreparing)="onCustomPreparing($event)"
                [dataSource]="customOfficeData" [remoteOperations]='true' keyExpr="id">
                <dxo-filter-row [visible]="false"></dxo-filter-row>
                <dxo-search-panel [visible]="true">
                </dxo-search-panel>
                <dxo-paging [enabled]="true">
                </dxo-paging>
                <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
                </dxo-pager>
                <dxo-export [enabled]="true" fileName="manufacturingFile" [allowExportSelectedData]="true"></dxo-export>
                <dxo-selection mode="single"></dxo-selection>
                <dxo-group-panel [visible]="true"></dxo-group-panel>
                <dxi-column [width]="150" caption="{{'action' | translate}}" name="command-editing"
                    [allowFiltering]="false" [allowSorting]="false" cellTemplate="cellTemplate">
                    <div *dxTemplate="let data of 'cellTemplate'">

                        <dx-button text="{{'select_manufacturer' | translate}}" (click)="funcSelectCustomOffice(data)"
                            type="success" icon="edit" [elementAttr]="{ class: 'btn btn-primary' }">
                        </dx-button>
                    </div>
                </dxi-column>
                <dxi-column dataField="manufacturer_name" caption="{{'manufacturer_name' | translate}}"></dxi-column>
                <dxi-column dataField="country_name" caption="{{'country' | translate}}"></dxi-column>
                <dxi-column dataField="region_name" caption="{{'region' | translate}}"></dxi-column>
                <dxi-column dataField="district" caption="{{'district' | translate}}"></dxi-column>
                <dxi-column dataField="physical_address" caption="{{'physical_address' | translate}}"></dxi-column>
                <dxi-column dataField="postal_address" caption="{{'postal_address' | translate}}"></dxi-column>
                <dxi-column dataField="email_address" caption="{{'email_address' | translate}}"></dxi-column>

                <dxo-paging [pageSize]="50"></dxo-paging>
            </dx-data-grid>
        </dx-scroll-view>
    </div>
</dx-popup>





